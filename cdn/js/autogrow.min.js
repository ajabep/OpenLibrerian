(function(e){e.fn.autogrow=function(c){function k(d){var a=e(this),f=a.innerHeight(),b=this.scrollHeight,g=a.data("autogrow-start-height")||0;if(f<b)this.scrollTop=0,c.animate?a.stop().animate({height:b},c.speed):a.innerHeight(b);else if(!d||8==d.which||46==d.which||d.ctrlKey&&88==d.which)if(f>g){d=a.clone().addClass(c.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(a.val());a.after(d);do b=d[0].scrollHeight-1,d.innerHeight(b);while(b===d[0].scrollHeight);b++;d.remove();a.focus(); b<g&&(b=g);f>b&&c.animate?a.stop().animate({height:b},c.speed):a.innerHeight(b)}else a.innerHeight(g)}var h=e(this).css({overflow:"hidden",resize:"none"}),l=h.selector,m={context:e(document),animate:!0,speed:200,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};c=e.isPlainObject(c)?c:{context:c?c:e(document)};c=e.extend({},m,c);h.each(function(d,a){var f,b;a=e(a);a.is(":visible")||0<parseInt(a.css("height"),10)?f=parseInt(a.css("height"),10)||a.innerHeight():(b=a.clone().addClass(c.cloneClass).val(a.val()).css({position:"absolute", visibility:"hidden",display:"block"}),e("body").append(b),f=b.innerHeight(),b.remove());c.fixMinHeight&&a.data("autogrow-start-height",f);a.css("height",f);c.onInitialize&&a.length&&k.call(a[0])});c.context.on("keyup paste",l,k);return h}})(jQuery);